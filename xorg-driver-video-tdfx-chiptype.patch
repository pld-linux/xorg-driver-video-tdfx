--- xf86-video-tdfx-1.4.0/src/tdfx_driver.c.orig	2008-03-19 20:37:46.000000000 +0100
+++ xf86-video-tdfx-1.4.0/src/tdfx_driver.c	2008-09-12 23:23:33.003622879 +0200
@@ -956,6 +956,7 @@
 
 #ifdef XSERVER_LIBPCIACCESS
     match = pTDFX->PciInfo[0];
+    pTDFX->ChipType = DEVICE_ID(match);
 #else
   match=pTDFX->PciInfo=xf86GetPciInfoForEntity(pTDFX->pEnt->index);
   TDFXFindChips(pScrn, match);
